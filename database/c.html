<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/vuepress-database-notes/favicon.svg"><title>附录 C：数据库题库 | 数据库笔记合集</title><meta name="description" content="各种数据库和 SQL 笔记">
    <link rel="preload" href="/vuepress-database-notes/assets/style-kK_HitsF.css" as="style"><link rel="stylesheet" href="/vuepress-database-notes/assets/style-kK_HitsF.css">
    <link rel="modulepreload" href="/vuepress-database-notes/assets/app-Y4KcrCk8.js"><link rel="modulepreload" href="/vuepress-database-notes/assets/c.html-ouQoC29w.js"><link rel="modulepreload" href="/vuepress-database-notes/assets/c.html-iJpLkQbB.js">
    <link rel="prefetch" href="/vuepress-database-notes/assets/index.html-3OMEh7v2.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/a.html-lD7h55Uu.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/b.html-hy0S0kJC.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-2ufS3Bh-.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-_YftCcTW.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-pxsPIr8K.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-CF5vwdVE.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/q3c.html-J4NXWFbR.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-1NFdM7Pm.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/recursion.html-aAvaVmql.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/uuid.html-0jyQmfn9.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-_hSx9S9S.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-ODvho95R.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/reset-password.html-Lhzvtkll.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-ZMZAFHjz.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/get-started.html-e8u7Cb1Y.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-l5PcTl_Y.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-K7Qv0dP6.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-5bw9J50K.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-ClpUd2jQ.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-_ytkL8Vd.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/404.html-_66Di_BG.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-u9V0Uhze.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/a.html-ot1fj7TR.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/b.html-taucG0JF.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-wS2Q25jA.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-lk2GbehY.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-poEdAidE.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-_mBbs8c0.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/q3c.html-hqAX-SgO.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-B3jV1wdd.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/recursion.html-p4c-XDB_.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/uuid.html-_P5H_Cvm.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-5245FXzm.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-T3bcetav.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/reset-password.html-TwI_Qrb-.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-mpF-FhgY.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/get-started.html-WveeA4DV.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-fZoPZJWi.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-RYeeePer.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-Ovae02D8.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-ylBA5vk5.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/index.html-b5f3WfeB.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/404.html-jFhflaI7.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/mermaid.core-cVPmsejw.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/copy-tex.min-LXTknfyr.js" as="script"><link rel="prefetch" href="/vuepress-database-notes/assets/SearchResult-w106pXgT.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress-database-notes/" class=""><img class="logo" src="/vuepress-database-notes/favicon.svg" alt="数据库笔记合集"><span class="site-name can-hide">数据库笔记合集</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/Sun-ZhenXing/vuepress-database-notes/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/Sun-ZhenXing/vuepress-database-notes/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">附录 C：数据库题库 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#1-简答题10-题" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 简答题（10 题）"><!--[--><!--]--> 1. 简答题（10 题） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#2-计算题" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 计算题"><!--[--><!--]--> 2. 计算题 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#21-关系代数计算" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 关系代数计算"><!--[--><!--]--> 2.1 关系代数计算 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#22-概念模型" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 概念模型"><!--[--><!--]--> 2.2 概念模型 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#3-应用题" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 应用题"><!--[--><!--]--> 3. 应用题 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#31-关系代数和-sql-编写" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 关系代数和 SQL 编写"><!--[--><!--]--> 3.1 关系代数和 SQL 编写 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#32-关系的函数依赖和范式" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 关系的函数依赖和范式"><!--[--><!--]--> 3.2 关系的函数依赖和范式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#4-其他相关题目" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 其他相关题目"><!--[--><!--]--> 4. 其他相关题目 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#41-填空题" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1 填空题"><!--[--><!--]--> 4.1 填空题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#42-关系模型" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2 关系模型"><!--[--><!--]--> 4.2 关系模型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#43-关系模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3 关系模式"><!--[--><!--]--> 4.3 关系模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#44-并发和故障恢复" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4 并发和故障恢复"><!--[--><!--]--> 4.4 并发和故障恢复 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#45-候选码和最小依赖集" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5 候选码和最小依赖集"><!--[--><!--]--> 4.5 候选码和最小依赖集 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#46-事务调度" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.6 事务调度"><!--[--><!--]--> 4.6 事务调度 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="附录-c数据库题库" tabindex="-1"><a class="header-anchor" href="#附录-c数据库题库" aria-hidden="true">#</a> 附录 C：数据库题库</h1><!-- markdownlint-disable MD033 --><nav class="table-of-contents"><ul><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#1-简答题10-题" class="router-link-active router-link-exact-active">1. 简答题（10 题）</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#2-计算题" class="router-link-active router-link-exact-active">2. 计算题</a><ul><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#21-关系代数计算" class="router-link-active router-link-exact-active">2.1 关系代数计算</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#22-概念模型" class="router-link-active router-link-exact-active">2.2 概念模型</a></li></ul></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#3-应用题" class="router-link-active router-link-exact-active">3. 应用题</a><ul><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#31-关系代数和-sql-编写" class="router-link-active router-link-exact-active">3.1 关系代数和 SQL 编写</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#32-关系的函数依赖和范式" class="router-link-active router-link-exact-active">3.2 关系的函数依赖和范式</a></li></ul></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#4-其他相关题目" class="router-link-active router-link-exact-active">4. 其他相关题目</a><ul><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#41-填空题" class="router-link-active router-link-exact-active">4.1 填空题</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#42-关系模型" class="router-link-active router-link-exact-active">4.2 关系模型</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#43-关系模式" class="router-link-active router-link-exact-active">4.3 关系模式</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#44-并发和故障恢复" class="router-link-active router-link-exact-active">4.4 并发和故障恢复</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#45-候选码和最小依赖集" class="router-link-active router-link-exact-active">4.5 候选码和最小依赖集</a></li><li><a aria-current="page" href="/vuepress-database-notes/database/c.html#46-事务调度" class="router-link-active router-link-exact-active">4.6 事务调度</a></li></ul></li></ul></nav><h2 id="1-简答题10-题" tabindex="-1"><a class="header-anchor" href="#1-简答题10-题" aria-hidden="true">#</a> 1. 简答题（10 题）</h2><ol><li>请简述数据库，并说明数据库管理系统的功能 <ul><li><strong>数据库</strong> 是长期储存在计算机内、有组织、可共享的大量数据的集合。数据库中的数据按一定的数据模型组织、描述和储存，具有较小的冗余度、较高的数据独立性和易扩展性，并可为各种用户共享</li><li><strong>数据库管理系统</strong>：是位于用户和操作系统之间的一层数据管理软件</li></ul></li><li>请说明数据库系统的三级模式与数据独立性 <ul><li>数据库系统的三级模式结构由外模式、模式和内模式组成</li><li>数据独立性包括数据的物理独立性和数据的逻辑独立性</li><li><strong>外模式</strong><ul><li>也称为 <strong>子模式</strong> 或 <strong>用户模式</strong> 它是数据库用户（包括程序员和最终用户）能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示</li></ul></li><li><strong>模式</strong><ul><li>也称为 <strong>逻辑模式</strong>，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图</li></ul></li><li><strong>内模式</strong><ul><li>也称 <strong>存储模式</strong>，一个数据库只有一个内模式，它是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式</li></ul></li></ul></li><li>请简述数据完整性约束，并举例说明 <ul><li>三大完整性： <ol><li>实体完整性：主码唯一且非空</li><li>参照完整性：外码要么没有，要么只有一个</li><li>用户定义完整性 <ul><li>非空 <code>not null</code></li><li>列值唯一 <code>unique</code></li><li>条件表达式 <code>check in (&#39;男&#39;, &#39;女&#39;)</code></li></ul></li></ol></li><li>举例略</li></ul></li><li>请简述函数依赖，并举例说明完全函数依赖，部分函数依赖，传递函数依赖 <ul><li>某个属性集决定另一个属性集时，称另一属性集依赖于该属性集</li><li>举例： <ol><li>完全依赖：通过 <code>{学生学号，选修课程名}</code> 可以得到 <code>{该生本门选修课程的成绩}</code>，而通过单独的 <code>{学生学号}</code> 或者单独的 <code>{选修课程名}</code> 都无法得到该成绩，则说明 <code>{该生本门选修课程的成绩}</code> 完全依赖于 <code>{学生学号，选修课程名}</code></li><li>部分函数依赖：通过 <code>{学生学号，课程号}</code> 可以得到 <code>{该生姓名}</code>，而通过单独的 <code>{学生学号}</code> 已经能够得到 <code>{该生姓名}</code>，则说明 <code>{该生姓名}</code> 部分依赖于 <code>{学生学号，课程号}</code></li><li>传递函数依赖：在关系 <code>R(学号，宿舍，费用)</code>中，通过 <code>{学号}</code> 可以得到 <code>{宿舍}</code>，通过 <code>{宿舍}</code> 可以得到 <code>{费用}</code>，而反之都不成立，则存在传递依赖 <code>{学号} -&gt; {费用}</code></li></ol></li></ul></li><li>请说明 1NF，2NF，3NF，BCNF 概念，并举例说明 <ul><li>请参考上面的知识点</li></ul></li><li>请说明视图的作用 <ul><li>视图能够简化用户的操作</li><li>视图使用户能以多种角度看待同一数据</li><li>视图对重构数据库提供了一定程度的逻辑独立性</li><li>视图能够对机密数据提供安全保护</li><li>适度利用视图可以更清晰的表达查询</li></ul></li><li>请说明数据库设计的步骤及任务 <ol><li>需求分析：分析用户的需求，包括数据、功能和性能需求</li><li>概念结构设计：主要采用 E-R 模型进行设计，包括画 E-R 图</li><li>逻辑结构设计：通过将 E-R 图转换成表，实现从 E-R 模型到关系模型的转换</li><li>物理结构设计：主要是为所设计的数据库选择合适的存储结构和存取路径</li><li>数据库实施：包括编程、测试和试运行</li><li>数据库运行和维护：系统的运行与数据库的日常维护</li></ol></li><li>请说明在数据库设计过程中将 E-R 模型转换为关系数据模型的转换原则 <ul><li>E-R 图中的每个实体，对应一个关系，该关系具有属性为实体的全部属性，关键字为实体的关键字</li></ul></li><li>请说明针对不同故障恢复的策略 <ol><li>事务故障的恢复就是利用日志文件撤销此事务已对数据库进行的修改</li><li>系统故障的恢复就是要撤销故障发生时未完成的事务，重写已完成的事务</li><li>介质故障的恢复就是重装数据库，然后重写已完成的事务</li></ol></li><li>请举例说明丢失修改的调度序列，并将其修改为可串行化调度 <ul><li>略，参见上面的知识点</li></ul></li></ol><h2 id="2-计算题" tabindex="-1"><a class="header-anchor" href="#2-计算题" aria-hidden="true">#</a> 2. 计算题</h2><h3 id="21-关系代数计算" tabindex="-1"><a class="header-anchor" href="#21-关系代数计算" aria-hidden="true">#</a> 2.1 关系代数计算</h3><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">R:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span></p><table><thead><tr><th>A</th><th>B</th></tr></thead><tbody><tr><td>1</td><td>5</td></tr><tr><td>2</td><td>6</td></tr><tr><td>3</td><td>7</td></tr></tbody></table><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">S:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span></span></p><table><thead><tr><th>A</th><th>C</th><th>D</th></tr></thead><tbody><tr><td>5</td><td>5</td><td>1</td></tr><tr><td>2</td><td>6</td><td>2</td></tr><tr><td>6</td><td>7</td><td>3</td></tr></tbody></table><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><mi mathvariant="normal">A</mi><mo separator="true">,</mo><mi mathvariant="normal">C</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\rm \Pi_{A,C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">A</span><span class="mpunct mtight">,</span><span class="mord mathrm mtight">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">R</mi><mo>⋈</mo><mi mathvariant="normal">S</mi></mrow><annotation encoding="application/x-tex">\rm R \Join S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6883em;vertical-align:-0.005em;"></span><span class="mord"><span class="mord mathrm">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">S</span></span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi mathvariant="normal">A</mi><mo>=</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\rm \sigma_{A=1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">A</span><span class="mrel mtight">=</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></li></ol><h3 id="22-概念模型" tabindex="-1"><a class="header-anchor" href="#22-概念模型" aria-hidden="true">#</a> 2.2 概念模型</h3><p>学校中有若干系，每个系有若干班级和教研室，每个教研室有若干教员，其中有的教授和副教授每人各带若干研究生，每个班有若干学生，每门课可由若干学生选修。请用 E-R 图画出该学校的概念模型，并转换为关系模型，表明主外码。</p><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><h2 id="3-应用题" tabindex="-1"><a class="header-anchor" href="#3-应用题" aria-hidden="true">#</a> 3. 应用题</h2><h3 id="31-关系代数和-sql-编写" tabindex="-1"><a class="header-anchor" href="#31-关系代数和-sql-编写" aria-hidden="true">#</a> 3.1 关系代数和 SQL 编写</h3><p>有关系模式四个：</p><ul><li>供应商关系：<code>S(Sno , Sname, Saddr)</code></li><li>零件关系：<code>P(Pno,  Pname, Color, Weight)</code></li><li>工程关系：<code>J(Jno, Jname, Jcity, Balance)</code></li><li>供应关系：<code>SPJ(Sno, Pno, Jno, Price, Qty)</code></li></ul><p>用关系代数（1-3）和 SQL（4-10）完成如下查询：</p><ol><li><p>检索没有发生任何供应关系的零件编号</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><mi mathvariant="normal">P</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">o</mi></mrow></msub><mo stretchy="false">(</mo><mi mathvariant="normal">P</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mi mathvariant="normal">Π</mi><mrow><mi mathvariant="normal">P</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">o</mi></mrow></msub><mo stretchy="false">(</mo><mi mathvariant="normal">S</mi><mi mathvariant="normal">P</mi><mi mathvariant="normal">J</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> \rm \Pi_{Pno}(P) - \Pi_{Pno}(SPJ) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">Pno</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathrm">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathrm">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">Pno</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathrm">SPJ</span><span class="mclose">)</span></span></span></span></span></span></p></li><li><p>检索使用了编号为 <code>P3</code> 或 <code>P5</code> 零件的工程编号 <code>Jno</code></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><mi mathvariant="normal">J</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">o</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mrow><mi mathvariant="normal">P</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">o</mi><mo>=</mo><mtext>‘P3’</mtext><mo>∨</mo><mi mathvariant="normal">P</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">o</mi><mo>=</mo><mtext>‘P5’</mtext></mrow></msub><mo stretchy="false">(</mo><mi mathvariant="normal">S</mi><mi mathvariant="normal">P</mi><mi mathvariant="normal">J</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> \rm \Pi_{Jno}(\sigma_{Pno=\text{`P3&#39;}\lor Pno=\text{`P5&#39;}}(SPJ)) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">Jno</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">Pno</span><span class="mrel mtight">=</span><span class="mord text mtight"><span class="mord mtight">‘P3’</span></span><span class="mbin mtight">∨</span><span class="mord mathrm mtight">Pno</span><span class="mrel mtight">=</span><span class="mord text mtight"><span class="mord mtight">‘P5’</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathrm">SPJ</span><span class="mclose">))</span></span></span></span></span></span></p></li><li><p>检索使用了红色零件的工程号 <code>Jno</code> 和工程名 <code>Jname</code></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><mi mathvariant="normal">J</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">o</mi><mo separator="true">,</mo><mtext> </mtext><mi mathvariant="normal">J</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">e</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mrow><mi mathvariant="normal">C</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mo>=</mo><mtext>‘红色’</mtext></mrow></msub><mo stretchy="false">(</mo><mi mathvariant="normal">P</mi><mo>⋈</mo><mi mathvariant="normal">S</mi><mi mathvariant="normal">P</mi><mi mathvariant="normal">J</mi><mo>⋈</mo><mi mathvariant="normal">J</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> \rm \Pi_{Jno,\,Jname}(\sigma_{Color=\text{`红色&#39;}}(P \Join SPJ \Join J)) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">Jno</span><span class="mpunct mtight">,</span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mathrm mtight">Jname</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">Color</span><span class="mrel mtight">=</span><span class="mord text mtight"><span class="mord mtight">‘</span><span class="mord cjk_fallback mtight">红色</span><span class="mord mtight">’</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathrm">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">SPJ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">J</span><span class="mclose">))</span></span></span></span></span></span></p></li><li><p>定义表 <code>SPJ</code>，主码：<code>(Sno, Pno, Jno)</code>，外码 <code>Sno</code>、<code>Pno</code>，<code>Jno</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">CREATE</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">TABLE</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">SPJ</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">    Sno </span><span style="color:#569CD6;">CHAR</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">4</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">    Pno </span><span style="color:#569CD6;">CHAR</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">4</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">    Jno </span><span style="color:#569CD6;">CHAR</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">8</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">    Price </span><span style="color:#569CD6;">DECIMAL</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">6</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">    Qty </span><span style="color:#569CD6;">DECIMAL</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">8</span><span style="color:#D4D4D4;">, </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">PRIMARY KEY</span><span style="color:#D4D4D4;"> (Sno, Pno, Jno),</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">FOREIGN KEY</span><span style="color:#D4D4D4;"> (Sno) </span><span style="color:#569CD6;">REFERENCES</span><span style="color:#D4D4D4;"> S(Sno),</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">FOREIGN KEY</span><span style="color:#D4D4D4;"> (Pno) </span><span style="color:#569CD6;">REFERENCES</span><span style="color:#D4D4D4;"> P(Pno),</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">FOREIGN KEY</span><span style="color:#D4D4D4;"> (Jno) </span><span style="color:#569CD6;">REFERENCES</span><span style="color:#D4D4D4;"> J(Jno)</span></span>
<span class="line"><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>定义使用红色零件的供应商名称和地址的视图</p><div class="language-sql" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">CREATE</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">VIEW</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">S_1</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">AS</span></span>
<span class="line"><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> Sname, Saddr </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> SPJ, P, S</span></span>
<span class="line"><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> SPJ.Sno = S.Sno </span><span style="color:#569CD6;">AND</span><span style="color:#D4D4D4;"> SPJ.Pno = P.Pno </span><span style="color:#569CD6;">AND</span><span style="color:#D4D4D4;"> Color = </span><span style="color:#CE9178;">&#39;红色&#39;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>将供应商 <code>S5</code> 提供的零件 <code>P4</code> 的价格提高 <code>6%</code></p><div class="language-sql" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">UPDATE</span><span style="color:#D4D4D4;"> SPJ </span><span style="color:#569CD6;">SET</span><span style="color:#D4D4D4;"> Price = Price * </span><span style="color:#B5CEA8;">1</span><span style="color:#D4D4D4;">.</span><span style="color:#B5CEA8;">06</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> Sno = </span><span style="color:#CE9178;">&#39;S5&#39;</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">AND</span><span style="color:#D4D4D4;"> Pno = </span><span style="color:#CE9178;">&#39;P4&#39;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>删除供应商号为 <code>S4</code> 的所有供应商记录</p><div class="language-sql" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">DELETE</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> SPJ </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> Sno = </span><span style="color:#CE9178;">&#39;S4&#39;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#569CD6;">DELETE</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> S </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> Sno = </span><span style="color:#CE9178;">&#39;S4&#39;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>检索不使用编号为 <code>P3</code> 零件的工程编号 <code>Jno</code> 和工程名称 <code>Jname</code></p><div class="language-sql" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> Jno, Jname </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> J </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> Jno </span><span style="color:#569CD6;">NOT</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">IN</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> Jno </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> SPJ </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> Pno = </span><span style="color:#CE9178;">&#39;P3&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span></code></pre></div></li><li><p>检索至少使用了编号为 <code>P3</code> 和 <code>P5</code> 零件的工程编号 <code>Jno</code></p><div class="language-sql" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> Jno </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> SPJ </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> Pno = </span><span style="color:#CE9178;">&#39;P3&#39;</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">AND</span><span style="color:#D4D4D4;"> Jno </span><span style="color:#569CD6;">IN</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> Jno </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> SPJ </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> Pno = </span><span style="color:#CE9178;">&#39;P5&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span></code></pre></div></li><li><p>检索使用了全部零件的工程名称 <code>Jname</code></p><div class="language-sql" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> Jname </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> J </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">NOT</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">EXISTS</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> * </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> P </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">NOT</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">EXISTS</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">SELECT</span><span style="color:#D4D4D4;"> * </span><span style="color:#569CD6;">FROM</span><span style="color:#D4D4D4;"> SPJ </span><span style="color:#569CD6;">WHERE</span><span style="color:#D4D4D4;"> SPJ.Pno = P.Pno </span><span style="color:#569CD6;">AND</span><span style="color:#D4D4D4;"> SPJ.Jno = J.Jno</span></span>
<span class="line"><span style="color:#D4D4D4;">    )</span></span>
<span class="line"><span style="color:#D4D4D4;">);</span></span>
<span class="line"></span></code></pre></div></li></ol><h3 id="32-关系的函数依赖和范式" tabindex="-1"><a class="header-anchor" href="#32-关系的函数依赖和范式" aria-hidden="true">#</a> 3.2 关系的函数依赖和范式</h3><p>关系模式：销售（时间，顾客编号，顾客名，商品编号，商品名，数量，单价）。语义：任何时间，对于任何顾客，同一商品的单价相同。</p><ol><li>列出函数依赖</li><li>请判断该关系模式最高为第几范式，并说明理由</li><li>请把上面的关系模式转化为 3NF，说明原因并指明主码</li></ol><p>解答：</p><p>(1)</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>F</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">{</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>顾客编号</mtext><mo>→</mo><mtext>顾客名</mtext><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>商品编号</mtext><mo>→</mo><mtext>商品名</mtext><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>商品编号</mtext><mo>→</mo><mtext>单价</mtext><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>(时间, 顾客编号, 商品编号)</mtext><mo>→</mo><mtext>数量</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mo stretchy="false" lspace="0em" rspace="0em">}</mo></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex"> \begin{aligned} F &amp;= \{ \\ &amp; \text{顾客编号} \to \text{顾客名}, \\ &amp; \text{商品编号} \to \text{商品名}, \\ &amp; \text{商品编号} \to \text{单价}, \\ &amp; \text{(时间, 顾客编号, 商品编号)} \to \text{数量} \\ \} \end{aligned} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:9em;vertical-align:-4.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.75em;"><span style="top:-6.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-0.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mclose">}</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.25em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.75em;"><span style="top:-6.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">{</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord cjk_fallback">顾客编号</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord cjk_fallback">顾客名</span></span><span class="mpunct">,</span></span></span><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord cjk_fallback">商品编号</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord cjk_fallback">商品名</span></span><span class="mpunct">,</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord cjk_fallback">商品编号</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord cjk_fallback">单价</span></span><span class="mpunct">,</span></span></span><span style="top:-0.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">(</span><span class="mord cjk_fallback">时间</span><span class="mord">, </span><span class="mord cjk_fallback">顾客编号</span><span class="mord">, </span><span class="mord cjk_fallback">商品编号</span><span class="mord">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord cjk_fallback">数量</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>(2)</p><p>最高为 1NF，由于上述函数依赖集为：</p><ul><li>L 类：时间，顾客编号，商品编号</li><li>R 类：顾客名，商品名，单价，数量</li><li>N 类：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mclose">}</span></span></span></span></li><li>LR 类：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mclose">}</span></span></span></span></li></ul><p>所以</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mtext>时间</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>顾客编号</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>商品编号</mtext><msubsup><mo stretchy="false">)</mo><mi>F</mi><mo>+</mo></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mtext>时间</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>顾客编号</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>商品编号</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>顾客名</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>商品名</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>单价</mtext><mo separator="true">,</mo><mtext> </mtext><mtext>数量</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>U</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex"> \begin{aligned} &amp; (\text{时间},\,\text{顾客编号},\,\text{商品编号})_F^+ \\ &amp; = ( \text{时间},\, \text{顾客编号},\, \text{商品编号},\, \text{顾客名},\, \text{商品名},\, \text{单价},\, \text{数量} ) \\ &amp; = U \end{aligned} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">时间</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">顾客编号</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">商品编号</span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8213em;"><span style="top:-2.4163em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2837em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">时间</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">顾客编号</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">商品编号</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">顾客名</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">商品名</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">单价</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">数量</span></span><span class="mclose">)</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>那么关系模式的码为：（时间，顾客编号，商品编号），由于非主属性顾客名对码是部分函数依赖，所以不符合 2NF。</p><p>(3)</p><ul><li>顾客（<u>顾客编号</u>，顾客名）</li><li>商品（<u>商品编号</u>，商品名，单价）</li><li>销售（<u>时间，顾客编号，商品编号</u>，数量）</li></ul><p>非主属性顾客名对码不存在部分函数依赖，也不存在传递函数依赖，所以是 3NF。</p><h2 id="4-其他相关题目" tabindex="-1"><a class="header-anchor" href="#4-其他相关题目" aria-hidden="true">#</a> 4. 其他相关题目</h2><h3 id="41-填空题" tabindex="-1"><a class="header-anchor" href="#41-填空题" aria-hidden="true">#</a> 4.1 填空题</h3><ol><li>数据模型通常由 <u>数据结构，数据操作，完整性约束</u> 三个要素组成</li><li>有了 <u>外模式/模式</u> 可以保证数据和应用程序之间的逻辑独立性；有了 <u>内模式/模式</u>，可以保证数据和应用程序之间的物理独立性</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><msub><mi mathvariant="normal">F</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><msub><mi mathvariant="normal">F</mi><mn>2</mn></msub></msub><mo stretchy="false">(</mo><mi mathvariant="normal">E</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm\sigma_{F_1}(\sigma_{F_2}(E))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0001em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathrm">E</span><span class="mclose">))</span></span></span></span></span> 等价于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder accentunder="true"><mrow><msub><mi>σ</mi><mrow><msub><mi mathvariant="normal">F</mi><mn>1</mn></msub><mo>∧</mo><msub><mi mathvariant="normal">F</mi><mn>2</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi mathvariant="normal">E</mi><mo stretchy="false">)</mo></mrow><mo stretchy="true">‾</mo></munder></mrow><annotation encoding="application/x-tex">\rm\underline{\sigma_{F_1 \land F_2}(E)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2001em;vertical-align:-0.4501em;"></span><span class="mord"><span class="mord underline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em;"><span style="top:-2.5899em;"><span class="pstrut" style="height:3em;"></span><span class="underline-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">∧</span><span class="mord mtight"><span class="mord mathrm mtight">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathrm">E</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4501em;"><span></span></span></span></span></span></span></span></span></span></li><li>关系模式进行投影运算后属性数 <u>小于或等于</u> 原属性数</li><li>SQL 的数据定义语句包括：<u>定义表，定义视图，定义索引</u> 等</li><li>在 SQL 查询时，如果要去掉查询结果中的重复元组，需使用 <u><code>distinct</code></u></li><li>关系完备的系统支持 <u>关系数据结构</u>，和所有 <u>关系代数</u> 操作</li><li>事务具有 <u>原子性、一致性、隔离性、持续性</u> 的特性</li><li>在数据库系统中，定义存取权限称为 <u>授权</u></li><li>关系数据库规范化要解决的问题是插入异常，<u>删除异常，更新异常</u></li></ol><h3 id="42-关系模型" tabindex="-1"><a class="header-anchor" href="#42-关系模型" aria-hidden="true">#</a> 4.2 关系模型</h3><p>有一课程管理系统：一个系可开设多门课程，学生可选修多门课程，一名教师只教一门课程，但一门课程可有几名教师开设。</p><ol><li><p>试画出 E-R 图并标注属性</p><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--></li><li><p>转换成关系模型</p><ul><li><code>Dept(Deptno, Deptname, Dmanger)</code></li><li><code>Student(Sno, Sname, Sage, Deptno)</code></li><li><code>Teacher(Tno, Tname, Deptno, Cno)</code></li><li><code>Course(Cno, Cname, Credit, Deptno)</code></li><li><code>SC(Sno, Cno, Grade)</code></li></ul></li></ol><h3 id="43-关系模式" tabindex="-1"><a class="header-anchor" href="#43-关系模式" aria-hidden="true">#</a> 4.3 关系模式</h3><p>写出3个关系模式分别满足：</p><ol><li>是 1NF，不是 2NF</li><li>是 2NF，不是 3NF</li><li>是 3NF，也是 BCNF</li></ol><p>并说明所写的关系模式是前者，不是（或也是）后者。</p><p>答：</p><ol><li>学生选课（学号，姓名，课程号，成绩） <ul><li>属性不可分，是 1NF；存在非主属性对键码的部分依赖，不是 2NF</li></ul></li><li>学生（学号，姓名，系别，系主任） <ul><li>码为单属性，不存在部分依赖，是 2NF，存在非主属性对键码的传递依赖，不是 3NF</li></ul></li><li>学生（学号，姓名，年龄）；选修（学号，课程号，成绩） <ul><li>非主属性对键码不存在部分依赖和传递依赖，是 3NF，主属性对键码不存在部分依赖和传递依赖，主属性对非主属性不存在函数依赖是 BCNF</li></ul></li></ol><h3 id="44-并发和故障恢复" tabindex="-1"><a class="header-anchor" href="#44-并发和故障恢复" aria-hidden="true">#</a> 4.4 并发和故障恢复</h3><p>试述系统故障的恢复的策略和方法。</p><p>策略：要撤销故障发生时未完成的事务，重做已完成的事务。</p><p>步骤：</p><ol><li>正向扫描日志文件，找出在故障发生前已经提交的事务记录，将其事务标识记入重做队列。同时找出故障发生时尚未完成的事务，将其事务标识记入撤销队列</li><li>对撤销队列中的各个事务进行撤销处理</li><li>对重做队列中的各个事务进行重做处理</li></ol><p>并发操作可能导致哪几种数据不一致的现象？采用什么协议解决这几种数据不一致现象？</p><p>并发操作可能导致</p><ol><li>修改丢失</li><li>读 “脏” 数据</li><li>不可重复读</li></ol><p>3 种数据不一致现象。采用一级封锁协议可解决丢失修改的问题，二级封锁协议既可解决丢失修改的问题，也可解决读 “脏” 数据的问题，而三级封锁协议可解决上述 3 种数据不一致现象。</p><h3 id="45-候选码和最小依赖集" tabindex="-1"><a class="header-anchor" href="#45-候选码和最小依赖集" aria-hidden="true">#</a> 4.5 候选码和最小依赖集</h3><p>设关系模式 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mi>B</mi><mi>C</mi><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(ABCD)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">BC</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span> 上 FD 集为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mo stretchy="false">{</mo><mi>A</mi><mi>B</mi><mo>→</mo><mi>C</mi><mo separator="true">,</mo><mtext> </mtext><mi>A</mi><mo>→</mo><mi>B</mi><mo separator="true">,</mo><mtext> </mtext><mi>B</mi><mo>→</mo><mi>A</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">F = \{AB \to C,\, A\to B,\,B \to A\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mclose">}</span></span></span></span>。</p><ol><li>试求 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> 的候选码</li><li>试求 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">F_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li></ol><p>解答：</p><p>(1)</p><ul><li>L 类：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mclose">}</span></span></span></span></li><li>R 类：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></li><li>N 类：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span></li><li>LR 类：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo separator="true">,</mo><mtext> </mtext><mi>B</mi></mrow><annotation encoding="application/x-tex">A,\,B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></li></ul><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> 的候选码为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><mi>B</mi><mi>D</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext> </mtext><mo stretchy="false">(</mo><mi>A</mi><mi>D</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(BD),\,(AD)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)}</span></span></span></span>。</p><p>(2)</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>F</mi><mi>m</mi></msub><mo>=</mo><mo stretchy="false">{</mo><mi>B</mi><mo>→</mo><mi>C</mi><mo separator="true">,</mo><mtext> </mtext><mi>A</mi><mo>→</mo><mi>B</mi><mtext> </mtext><mtext> </mtext><mi>B</mi><mo>→</mo><mi>A</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> F_m = \{ B \to C,\, A \to B\,\, B \to A \} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mclose">}</span></span></span></span></span></p><h3 id="46-事务调度" tabindex="-1"><a class="header-anchor" href="#46-事务调度" aria-hidden="true">#</a> 4.6 事务调度</h3><p>设 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub><mo separator="true">,</mo><mtext> </mtext><msub><mi>T</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">T_1,\,T_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是如下两个事务，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> 为数据库中某个数据项，设 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 的初值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn></mrow><annotation encoding="application/x-tex">50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">50</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> 的初值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn></mrow><annotation encoding="application/x-tex">20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">20</span></span></span></span>。</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>T</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>:</mo><mi>A</mi><mo>:</mo><mo>=</mo><mi>B</mi><mo>∗</mo><mn>10</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>T</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>:</mo><mi>B</mi><mo>:</mo><mo>=</mo><mi>A</mi><mo>+</mo><mn>10</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex"> \begin{aligned} T_1 &amp;: A := B * 10 \\ T_2 &amp;: B := A + 10 \end{aligned} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">10</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">10</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>若允许这二个事务并行执行，试给出：</p><ol><li>不可串行化的调度</li><li>以及一个遵守两段锁协议的调度</li></ol><p>解答：</p><p>串行结果：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub><msub><mi>T</mi><mn>2</mn></msub><mo>:</mo><mi>A</mi><mo>=</mo><mn>200</mn><mo separator="true">,</mo><mtext> </mtext><mi>B</mi><mo>=</mo><mn>210</mn></mrow><annotation encoding="application/x-tex">T_1 T_2:A=200,\,B=210</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">200</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">210</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>2</mn></msub><msub><mi>T</mi><mn>1</mn></msub><mo>:</mo><mi>A</mi><mo>=</mo><mn>600</mn><mo separator="true">,</mo><mtext> </mtext><mi>B</mi><mo>=</mo><mn>60</mn></mrow><annotation encoding="application/x-tex">T_2 T_1:A=600,\,B=60</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">600</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">60</span></span></span></span></li></ul><p>（1）不可串行化的调度</p><table><thead><tr><th><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">T_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th><th><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">T_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm read(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">read</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm read(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">read</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">A</mi><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\rm A=B \times 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathrm">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">B</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathrm">10</span></span></span></span></span></td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm write(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">write</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">B</mi><mo>=</mo><mi mathvariant="normal">A</mi><mo>+</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\rm B=A+10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathrm">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathrm">10</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm write(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">write</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td></tr></tbody></table><p>（2）遵守两段锁协议的调度</p><table><thead><tr><th><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">T_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th><th><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">T_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">S</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Slock(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Slock</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm read(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">read</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">X</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Xlock(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Xlock</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">S</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Slock(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Slock</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">A</mi><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\rm A=B \times 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathrm">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">B</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathrm">10</span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm wait</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">wait</span></span></span></span></span></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm write(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">write</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm wait</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">wait</span></span></span></span></span></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm commit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">commit</span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm wait</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">wait</span></span></span></span></span></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">u</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm unlock(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">unlock</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm wait</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">wait</span></span></span></span></span></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">u</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm unlock(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">unlock</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm wait</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">wait</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm read(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">read</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">X</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Xlock(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Xlock</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">B</mi><mo>=</mo><mi mathvariant="normal">A</mi><mo>+</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">\rm B=A+10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathrm">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathrm">10</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm write(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">write</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm commit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">commit</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">u</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm unlock(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">unlock</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">u</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm unlock(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">unlock</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td></tr></tbody></table><p>（3）遵守两段锁协议但发生死锁的调度</p><table><thead><tr><th><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">T_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th><th><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">T_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">S</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Slock(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Slock</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm read(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">read</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">S</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Slock(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Slock</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">d</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm read(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">read</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">X</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Xlock(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Xlock</span><span class="mopen">(</span><span class="mord mathrm">A</span><span class="mclose">)</span></span></span></span></span></td><td></td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm wait</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">wait</span></span></span></span></span></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">X</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">k</mi><mo stretchy="false">(</mo><mi mathvariant="normal">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rm Xlock(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Xlock</span><span class="mopen">(</span><span class="mord mathrm">B</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td></td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">w</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi></mrow><annotation encoding="application/x-tex">\rm wait</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord"><span class="mord mathrm">wait</span></span></span></span></span></td></tr></tbody></table></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/Sun-ZhenXing/vuepress-database-notes//edit/main/docs/database/c.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1006925066@qq.com">Sun-ZhenXing</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/vuepress-database-notes/assets/app-Y4KcrCk8.js" defer></script>
  </body>
</html>
