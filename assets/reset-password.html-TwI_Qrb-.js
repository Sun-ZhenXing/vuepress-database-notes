import{_ as p,r as i,o as D,c as y,b as s,a as o,w as a,d as l,e as r}from"./app-Y4KcrCk8.js";const d={},u=s("h1",{id:"重置-mysql-密码",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#重置-mysql-密码","aria-hidden":"true"},"#"),l(" 重置 MySQL 密码")],-1),h=s("div",{class:"hint-container info"},[s("p",{class:"hint-container-title"},"版本帮助"),s("p",null,"本文会整理各种不同版本的 MySQL 的重置密码方法，如果这里不包含你的系统，请到仓库中提交 PR/Issue 来完善。")],-1),E={class:"table-of-contents"},C=s("h2",{id:"方法-1以安全模式重启",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#方法-1以安全模式重启","aria-hidden":"true"},"#"),l(" 【方法 1】以安全模式重启")],-1),A=s("h3",{id:"11-关闭-mysql-服务",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#11-关闭-mysql-服务","aria-hidden":"true"},"#"),l(" 1.1 关闭 MySQL 服务")],-1),_=s("p",null,"使用系统上的管理员权限执行下面的命令：",-1),v=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 对于 MySQL 5.x")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"stop"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 对于 MySQL 8.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"stop"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql80")]),l(`
`),s("span",{class:"line"})])])],-1),b=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"service"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"stop")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 或者是")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"systemctl"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"stop"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysqld.service")]),l(`
`),s("span",{class:"line"})])])],-1),m=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"mysql.server"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"stop")]),l(`
`),s("span",{class:"line"})])])],-1),q=r(`<h3 id="12-以安全模式启动-mysql" tabindex="-1"><a class="header-anchor" href="#12-以安全模式启动-mysql" aria-hidden="true">#</a> 1.2 以安全模式启动 MySQL</h3><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">mysqld_safe</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">--skip-grant-tables</span><span style="color:#D4D4D4;"> &amp;</span></span>
<span class="line"><span style="color:#6A9955;"># 或者是</span></span>
<span class="line"><span style="color:#DCDCAA;">mysqld</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">--skip-grant-tables</span><span style="color:#D4D4D4;"> &amp;</span></span>
<span class="line"></span></code></pre></div><h3 id="13-执行-sql-语句" tabindex="-1"><a class="header-anchor" href="#13-执行-sql-语句" aria-hidden="true">#</a> 1.3 执行 SQL 语句</h3><p>下面的部分是 MySQL 交互命令的内容（不同版本命令有区别）：</p>`,4),x=s("div",{class:"language-sql","data-ext":"sql"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6"}},"UPDATE"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"`mysql`"),s("span",{style:{color:"#D4D4D4"}},"."),s("span",{style:{color:"#CE9178"}},"`user`"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#569CD6"}},"SET"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"`password`"),s("span",{style:{color:"#D4D4D4"}},"="),s("span",{style:{color:"#569CD6"}},"PASSWORD"),s("span",{style:{color:"#D4D4D4"}},"("),s("span",{style:{color:"#CE9178"}},"'新密码'"),s("span",{style:{color:"#D4D4D4"}},") "),s("span",{style:{color:"#569CD6"}},"WHERE"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"`user`"),s("span",{style:{color:"#D4D4D4"}},"="),s("span",{style:{color:"#CE9178"}},"'root'"),s("span",{style:{color:"#D4D4D4"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"EXIT;")]),l(`
`),s("span",{class:"line"})])])],-1),S=s("div",{class:"language-sql","data-ext":"sql"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6"}},"UPDATE"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"`mysql`"),s("span",{style:{color:"#D4D4D4"}},"."),s("span",{style:{color:"#CE9178"}},"`user`"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#569CD6"}},"SET"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"`authentication_string`"),s("span",{style:{color:"#D4D4D4"}},"="),s("span",{style:{color:"#569CD6"}},"PASSWORD"),s("span",{style:{color:"#D4D4D4"}},"("),s("span",{style:{color:"#CE9178"}},"'新密码'"),s("span",{style:{color:"#D4D4D4"}},") "),s("span",{style:{color:"#569CD6"}},"WHERE"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"`user`"),s("span",{style:{color:"#D4D4D4"}},"="),s("span",{style:{color:"#CE9178"}},"'root'"),s("span",{style:{color:"#D4D4D4"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"EXIT;")]),l(`
`),s("span",{class:"line"})])])],-1),L=s("div",{class:"language-sql","data-ext":"sql"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6"}},"ALTER"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#569CD6"}},"USER"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"'root'"),s("span",{style:{color:"#D4D4D4"}},"@"),s("span",{style:{color:"#CE9178"}},"'localhost'"),s("span",{style:{color:"#D4D4D4"}}," IDENTIFIED "),s("span",{style:{color:"#569CD6"}},"BY"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"'新密码'"),s("span",{style:{color:"#D4D4D4"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"EXIT;")]),l(`
`),s("span",{class:"line"})])])],-1),k=s("h3",{id:"14-启动-mysql-服务",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#14-启动-mysql-服务","aria-hidden":"true"},"#"),l(" 1.4 启动 MySQL 服务")],-1),g=s("p",null,"使用系统上的管理员权限执行下面的命令：",-1),f=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 对于 MySQL 5.x")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"start"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 对于 MySQL 8.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"start"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql80")]),l(`
`),s("span",{class:"line"})])])],-1),M=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"service"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"start")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 或者是")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"systemctl"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"start"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysqld.service")]),l(`
`),s("span",{class:"line"})])])],-1),Q=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"mysql.server"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"start")]),l(`
`),s("span",{class:"line"})])])],-1),I=r('<h2 id="方法-2修改配置文件" tabindex="-1"><a class="header-anchor" href="#方法-2修改配置文件" aria-hidden="true">#</a> 【方法 2】修改配置文件</h2><h3 id="21-修改配置文件" tabindex="-1"><a class="header-anchor" href="#21-修改配置文件" aria-hidden="true">#</a> 2.1 修改配置文件</h3><p>修改前关闭 MySQL 服务，可参考 <a href="#11-%E5%85%B3%E9%97%AD-mysql-%E6%9C%8D%E5%8A%A1">上一节</a>。</p><p>修改 <code>my.cnf</code>（可能是 <code>/etc/my.cnf</code> 或 <code>/etc/mysql/my.cnf</code>），在 <code>[mysqld]</code> 后添加 <code>skip-grant-tables</code>。</p><p>如果没有选项 <code>[mysqld]</code>，添加 <code>[mysqld]</code> 到配置文件中，并保存。</p><h3 id="22-重启-mysql-服务" tabindex="-1"><a class="header-anchor" href="#22-重启-mysql-服务" aria-hidden="true">#</a> 2.2 重启 MySQL 服务</h3>',6),R=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 对于 MySQL 5.x")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"stop"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"start"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 对于 MySQL 8.0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"stop"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql80")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"net"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"start"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql80")]),l(`
`),s("span",{class:"line"})])])],-1),P=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"service"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysql"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"restart")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"# 或者是")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"systemctl"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"restart"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"mysqld.service")]),l(`
`),s("span",{class:"line"})])])],-1),T=s("div",{class:"language-bash","data-ext":"sh"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"mysql.server"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"restart")]),l(`
`),s("span",{class:"line"})])])],-1),w=r(`<h3 id="23-进入-mysql-执行-sql-语句" tabindex="-1"><a class="header-anchor" href="#23-进入-mysql-执行-sql-语句" aria-hidden="true">#</a> 2.3 进入 MySQL 执行 SQL 语句</h3><p>现在可以不用密码进入服务器：</p><div class="language-sql" data-ext="sql"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">mysql -u </span><span style="color:#569CD6;">root</span></span>
<span class="line"></span></code></pre></div><p>下面跳转到 <a href="#13-%E6%89%A7%E8%A1%8C-sql-%E8%AF%AD%E5%8F%A5">执行 SQL 语句</a>，执行上述 SQL。</p><h3 id="24-修改回原配置" tabindex="-1"><a class="header-anchor" href="#24-修改回原配置" aria-hidden="true">#</a> 2.4 修改回原配置</h3><p>删除上述配置，然后重启 MySQL 服务。</p>`,6);function V(W,F){const t=i("router-link"),c=i("Tabs");return D(),y("div",null,[u,h,s("nav",E,[s("ul",null,[s("li",null,[o(t,{to:"#方法-1以安全模式重启"},{default:a(()=>[l("【方法 1】以安全模式重启")]),_:1}),s("ul",null,[s("li",null,[o(t,{to:"#11-关闭-mysql-服务"},{default:a(()=>[l("1.1 关闭 MySQL 服务")]),_:1})]),s("li",null,[o(t,{to:"#12-以安全模式启动-mysql"},{default:a(()=>[l("1.2 以安全模式启动 MySQL")]),_:1})]),s("li",null,[o(t,{to:"#13-执行-sql-语句"},{default:a(()=>[l("1.3 执行 SQL 语句")]),_:1})]),s("li",null,[o(t,{to:"#14-启动-mysql-服务"},{default:a(()=>[l("1.4 启动 MySQL 服务")]),_:1})])])]),s("li",null,[o(t,{to:"#方法-2修改配置文件"},{default:a(()=>[l("【方法 2】修改配置文件")]),_:1}),s("ul",null,[s("li",null,[o(t,{to:"#21-修改配置文件"},{default:a(()=>[l("2.1 修改配置文件")]),_:1})]),s("li",null,[o(t,{to:"#22-重启-mysql-服务"},{default:a(()=>[l("2.2 重启 MySQL 服务")]),_:1})]),s("li",null,[o(t,{to:"#23-进入-mysql-执行-sql-语句"},{default:a(()=>[l("2.3 进入 MySQL 执行 SQL 语句")]),_:1})]),s("li",null,[o(t,{to:"#24-修改回原配置"},{default:a(()=>[l("2.4 修改回原配置")]),_:1})])])])])]),C,A,_,o(c,{id:"20",data:[{id:"Windows"},{id:"Linux"},{id:"Mac"}],"tab-id":"bash"},{title0:a(({value:e,isActive:n})=>[l("Windows")]),title1:a(({value:e,isActive:n})=>[l("Linux")]),title2:a(({value:e,isActive:n})=>[l("Mac")]),tab0:a(({value:e,isActive:n})=>[v]),tab1:a(({value:e,isActive:n})=>[b]),tab2:a(({value:e,isActive:n})=>[m]),_:1}),q,o(c,{id:"41",data:[{id:"MySQL 5.1-5.6"},{id:"MySQL 5.7"},{id:"MySQL 8.0"}],"tab-id":"mysql"},{title0:a(({value:e,isActive:n})=>[l("MySQL 5.1-5.6")]),title1:a(({value:e,isActive:n})=>[l("MySQL 5.7")]),title2:a(({value:e,isActive:n})=>[l("MySQL 8.0")]),tab0:a(({value:e,isActive:n})=>[x]),tab1:a(({value:e,isActive:n})=>[S]),tab2:a(({value:e,isActive:n})=>[L]),_:1}),k,g,o(c,{id:"58",data:[{id:"Windows"},{id:"Linux"},{id:"Mac"}],"tab-id":"bash"},{title0:a(({value:e,isActive:n})=>[l("Windows")]),title1:a(({value:e,isActive:n})=>[l("Linux")]),title2:a(({value:e,isActive:n})=>[l("Mac")]),tab0:a(({value:e,isActive:n})=>[f]),tab1:a(({value:e,isActive:n})=>[M]),tab2:a(({value:e,isActive:n})=>[Q]),_:1}),I,o(c,{id:"87",data:[{id:"Windows"},{id:"Linux"},{id:"Mac"}],"tab-id":"bash"},{title0:a(({value:e,isActive:n})=>[l("Windows")]),title1:a(({value:e,isActive:n})=>[l("Linux")]),title2:a(({value:e,isActive:n})=>[l("Mac")]),tab0:a(({value:e,isActive:n})=>[R]),tab1:a(({value:e,isActive:n})=>[P]),tab2:a(({value:e,isActive:n})=>[T]),_:1}),w])}const H=p(d,[["render",V],["__file","reset-password.html.vue"]]);export{H as default};
